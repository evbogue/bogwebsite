/* esm.sh - esbuild bundle(@jsr/std__yaml@1.0.5) es2022 production */
function m(e){return e===10||e===13}function E(e){return e===9||e===32}function g(e){return E(e)||m(e)}function y(e){return e===44||e===91||e===93||e===123||e===125}var W=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Zt(e){if(e===null)return!1;let t,i=0,n=e.length,r=W;for(let s=0;s<n;s++)if(t=r.indexOf(e.charAt(s)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function Jt(e){let t=e.replace(/[\r\n=]/g,""),i=t.length,n=W,r=[],s=0;for(let l=0;l<i;l++)l%4===0&&l&&(r.push(s>>16&255),r.push(s>>8&255),r.push(s&255)),s=s<<6|n.indexOf(t.charAt(l));let o=i%4*6;return o===0?(r.push(s>>16&255),r.push(s>>8&255),r.push(s&255)):o===18?(r.push(s>>10&255),r.push(s>>2&255)):o===12&&r.push(s>>4&255),new Uint8Array(r)}function te(e){let t=e.length,i=W,n="",r=0;for(let o=0;o<t;o++)o%3===0&&o&&(n+=i[r>>18&63],n+=i[r>>12&63],n+=i[r>>6&63],n+=i[r&63]),r=(r<<8)+e[o];let s=t%3;return s===0?(n+=i[r>>18&63],n+=i[r>>12&63],n+=i[r>>6&63],n+=i[r&63]):s===2?(n+=i[r>>10&63],n+=i[r>>4&63],n+=i[r<<2&63],n+=i[64]):s===1&&(n+=i[r>>2&63],n+=i[r<<4&63],n+=i[64],n+=i[64]),n}function ee(e){return e instanceof Uint8Array}var rt={tag:"tag:yaml.org,2002:binary",construct:Jt,kind:"scalar",predicate:ee,represent:te,resolve:Zt};var nt=["true","True","TRUE"],ie=["false","False","FALSE"],re=[...nt,...ie],st={tag:"tag:yaml.org,2002:bool",kind:"scalar",defaultStyle:"lowercase",predicate:e=>typeof e=="boolean"||e instanceof Boolean,construct:e=>nt.includes(e),resolve:e=>re.includes(e),represent:{lowercase:e=>(e instanceof Boolean?e.valueOf():e)?"true":"false",uppercase:e=>(e instanceof Boolean?e.valueOf():e)?"TRUE":"FALSE",camelcase:e=>(e instanceof Boolean?e.valueOf():e)?"True":"False"}};function M(e){return e!==null&&typeof e=="object"}function O(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}function k(e){return Object.prototype.toString.call(e)==="[object Object]"}var ne=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function se(e){return!(!ne.test(e)||e[e.length-1]==="_")}function oe(e){let t=e.replace(/_/g,"").toLowerCase(),i=t[0]==="-"?-1:1;return t[0]&&"+-".includes(t[0])&&(t=t.slice(1)),t===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:i*parseFloat(t)}var ae=/^[-+]?[0-9]+e/;function le(e,t){let i=e instanceof Number?e.valueOf():e;if(isNaN(i))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===i)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===i)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(O(i))return"-0.0";let n=i.toString(10);return ae.test(n)?n.replace("e",".e"):n}function he(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&(e%1!==0||O(e))}var ot={tag:"tag:yaml.org,2002:float",construct:oe,defaultStyle:"lowercase",kind:"scalar",predicate:he,represent:le,resolve:se};function R(e,t,i){return t<=e&&e<=i}function ce(e){return R(e,48,57)||R(e,65,70)||R(e,97,102)}function ue(e){return R(e,48,55)}function fe(e){return R(e,48,57)}function pe(e){let t=e.length,i=0,n=!1;if(!t)return!1;let r=e[i];if((r==="-"||r==="+")&&(r=e[++i]),r==="0"){if(i+1===t)return!0;if(r=e[++i],r==="b"){for(i++;i<t;i++)if(r=e[i],r!=="_"){if(r!=="0"&&r!=="1")return!1;n=!0}return n&&r!=="_"}if(r==="x"){for(i++;i<t;i++)if(r=e[i],r!=="_"){if(!ce(e.charCodeAt(i)))return!1;n=!0}return n&&r!=="_"}for(;i<t;i++)if(r=e[i],r!=="_"){if(!ue(e.charCodeAt(i)))return!1;n=!0}return n&&r!=="_"}if(r==="_")return!1;for(;i<t;i++)if(r=e[i],r!=="_"){if(!fe(e.charCodeAt(i)))return!1;n=!0}return!n||r==="_"?!1:/^(:[0-5]?[0-9])+$/.test(e.slice(i))}function de(e){let t=e;t.includes("_")&&(t=t.replace(/_/g,""));let i=1,n=t[0];return(n==="-"||n==="+")&&(n==="-"&&(i=-1),t=t.slice(1),n=t[0]),t==="0"?0:n==="0"?t[1]==="b"?i*parseInt(t.slice(2),2):t[1]==="x"?i*parseInt(t,16):i*parseInt(t,8):i*parseInt(t,10)}function xe(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&e%1===0&&!O(e)}var at={tag:"tag:yaml.org,2002:int",construct:de,defaultStyle:"decimal",kind:"scalar",predicate:xe,represent:{binary(e){let t=e instanceof Number?e.valueOf():e;return t>=0?`0b${t.toString(2)}`:`-0b${t.toString(2).slice(1)}`},octal(e){let t=e instanceof Number?e.valueOf():e;return t>=0?`0${t.toString(8)}`:`-0${t.toString(8).slice(1)}`},decimal(e){return(e instanceof Number?e.valueOf():e).toString(10)},hexadecimal(e){let t=e instanceof Number?e.valueOf():e;return t>=0?`0x${t.toString(16).toUpperCase()}`:`-0x${t.toString(16).toUpperCase().slice(1)}`}},resolve:pe};var lt={tag:"tag:yaml.org,2002:map",resolve(){return!0},construct(e){return e!==null?e:{}},kind:"mapping"};var ht={tag:"tag:yaml.org,2002:merge",kind:"scalar",resolve:e=>e==="<<"||e===null,construct:e=>e};var ct={tag:"tag:yaml.org,2002:null",kind:"scalar",defaultStyle:"lowercase",predicate:e=>e===null,construct:()=>null,resolve:e=>e==="~"||e==="null"||e==="Null"||e==="NULL",represent:{lowercase:()=>"null",uppercase:()=>"NULL",camelcase:()=>"Null"}};function ge(e){let t=new Set;for(let i of e){if(!k(i))return!1;let n=Object.keys(i);if(n.length!==1)return!1;for(let r of n){if(t.has(r))return!1;t.add(r)}}return!0}var ut={tag:"tag:yaml.org,2002:omap",kind:"sequence",resolve:ge,construct(e){return e}};function me(e){return e===null?!0:e.every(t=>k(t)&&Object.keys(t).length===1)}var ft={tag:"tag:yaml.org,2002:pairs",construct(e){return e?.flatMap(Object.entries)??[]},kind:"sequence",resolve:me};var pt=/^\/(?<regexp>[\s\S]+)\/(?<modifiers>[gismuy]*)$/,dt={tag:"tag:yaml.org,2002:js/regexp",kind:"scalar",resolve(e){if(e===null||!e.length)return!1;if(e.charAt(0)==="/"){let t=e.match(pt)?.groups;if(!t)return!1;let i=t.modifiers??"";if(new Set(i).size<i.length)return!1}return!0},construct(e){let{regexp:t=e,modifiers:i=""}=e.match(pt)?.groups??{};return new RegExp(t,i)},predicate:e=>e instanceof RegExp,represent:e=>e.toString()};var xt={tag:"tag:yaml.org,2002:seq",kind:"sequence",resolve:()=>!0,construct:e=>e!==null?e:[]};var gt={tag:"tag:yaml.org,2002:set",kind:"mapping",construct:e=>e!==null?e:{},resolve:e=>e===null?!0:Object.values(e).every(t=>t===null)};var mt={tag:"tag:yaml.org,2002:str",kind:"scalar",resolve:()=>!0,construct:e=>e!==null?e:""};var Et=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),St=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Ee(e){return e===null?!1:Et.exec(e)!==null||St.exec(e)!==null}function Se(e){let t=Et.exec(e);if(t===null&&(t=St.exec(e)),t===null)throw new Error("Cannot construct YAML timestamp: date resolve error");let i=+t[1],n=+t[2]-1,r=+t[3];if(!t[4])return new Date(Date.UTC(i,n,r));let s=+t[4],o=+t[5],l=+t[6],a=0;if(t[7]){let c=t[7].slice(0,3);for(;c.length<3;)c+="0";a=+c}let h=null;if(t[9]&&t[10]){let c=+t[10],f=+(t[11]||0);h=(c*60+f)*6e4,t[9]==="-"&&(h=-h)}let u=new Date(Date.UTC(i,n,r,s,o,l,a));return h&&u.setTime(u.getTime()-h),u}function Ae(e){return e.toISOString()}var At={tag:"tag:yaml.org,2002:timestamp",construct:Se,predicate(e){return e instanceof Date},kind:"scalar",represent:Ae,resolve:Ee};var wt={tag:"tag:yaml.org,2002:js/undefined",kind:"scalar",resolve(){return!0},construct(){},predicate(e){return typeof e>"u"},represent(){return""}};function we(e,t){let i={fallback:new Map,mapping:new Map,scalar:new Map,sequence:new Map},n=i.fallback;for(let r of[...e,...t])i[r.kind].set(r.tag,r),n.set(r.tag,r);return i}function b({explicitTypes:e=[],implicitTypes:t=[],include:i}){i&&(t.push(...i.implicitTypes),e.push(...i.explicitTypes));let n=we(t,e);return{implicitTypes:t,explicitTypes:e,typeMap:n}}var yt=b({explicitTypes:[mt,xt,lt]}),kt=b({implicitTypes:[ct,st,at,ot],include:yt}),Tt=b({include:kt}),C=b({explicitTypes:[rt,ut,ft,gt],implicitTypes:[At,ht],include:Tt}),ye=b({explicitTypes:[dt,wt],include:C}),F=new Map([["core",Tt],["default",C],["failsafe",yt],["json",kt],["extended",ye]]);var $=1,Nt=2,Mt=3,v=4,X=1,Ce=2,Ot=3,_e=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Le=/[\x85\u2028\u2029]/,Ie=/[,\[\]\{\}]/,Rt=/^(?:!|!!|![a-z\-]+!)$/i,bt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i,Ne=new Map([[120,2],[117,4],[85,8]]),Ft=new Map([[48,"\0"],[97,"\x07"],[98,"\b"],[116,"	"],[9,"	"],[110,`
`],[118,"\v"],[102,"\f"],[114,"\r"],[101,"\x1B"],[32," "],[34,'"'],[47,"/"],[92,"\\"],[78,"\x85"],[95,"\xA0"],[76,"\u2028"],[80,"\u2029"]]);function Me(e){if(48<=e&&e<=57)return e-48;let t=e|32;return 97<=t&&t<=102?t-97+10:-1}function Oe(e){return 48<=e&&e<=57?e-48:-1}function Re(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Pt=4,Bt=75,Dt=`\0\r
\x85\u2028\u2029`;function be(e,t){if(!e)return null;let i=t,n=t,r="",s="";for(;i>0&&!Dt.includes(e.charAt(i-1));)if(i--,t-i>Bt/2-1){r=" ... ",i+=5;break}for(;n<e.length&&!Dt.includes(e.charAt(n));)if(n++,n-t>Bt/2-1){s=" ... ",n-=5;break}let o=e.slice(i,n),l=" ".repeat(Pt),a=" ".repeat(Pt+t-i+r.length);return`${l+r+o+s}
${a}^`}function Fe(e,t,i,n){let r=`at line ${i+1}, column ${n+1}`,s=be(e,t);return s&&(r+=`:
${s}`),r}var D=class{input;length;lineIndent=0;lineStart=0;position=0;line=0;onWarning;allowDuplicateKeys;implicitTypes;typeMap;version;checkLineBreaks=!1;tagMap=new Map;anchorMap=new Map;tag;anchor;kind;result="";constructor(t,{schema:i=C,onWarning:n,allowDuplicateKeys:r=!1}){this.input=t,this.onWarning=n,this.allowDuplicateKeys=r,this.implicitTypes=i.implicitTypes,this.typeMap=i.typeMap,this.length=t.length,this.version=null,this.readIndent()}readIndent(){let t=this.peek();for(;t===32;)this.lineIndent+=1,t=this.next()}peek(t=0){return this.input.charCodeAt(this.position+t)}next(){return this.position+=1,this.peek()}#t(t){let i=Fe(this.input,this.position,this.line,this.position-this.lineStart);return new SyntaxError(`${t} ${i}`)}throwError(t){throw this.#t(t)}dispatchWarning(t){let i=this.#t(t);this.onWarning?.(i)}yamlDirectiveHandler(...t){if(this.version!==null)return this.throwError("Cannot handle YAML directive: duplication of %YAML directive");if(t.length!==1)return this.throwError("Cannot handle YAML directive: YAML directive accepts exactly one argument");let i=/^([0-9]+)\.([0-9]+)$/.exec(t[0]);if(i===null)return this.throwError("Cannot handle YAML directive: ill-formed argument");let n=parseInt(i[1],10),r=parseInt(i[2],10);if(n!==1)return this.throwError("Cannot handle YAML directive: unacceptable YAML version");if(this.version=t[0]??null,this.checkLineBreaks=r<2,r!==1&&r!==2)return this.dispatchWarning("Cannot handle YAML directive: unsupported YAML version")}tagDirectiveHandler(...t){if(t.length!==2)return this.throwError(`Cannot handle tag directive: directive accepts exactly two arguments, received ${t.length}`);let i=t[0],n=t[1];if(!Rt.test(i))return this.throwError(`Cannot handle tag directive: ill-formed handle (first argument) in "${i}"`);if(this.tagMap.has(i))return this.throwError(`Cannot handle tag directive: previously declared suffix for "${i}" tag handle`);if(!bt.test(n))return this.throwError("Cannot handle tag directive: ill-formed tag prefix (second argument) of the TAG directive");this.tagMap.set(i,n)}captureSegment(t,i,n){let r;if(t<i){if(r=this.input.slice(t,i),n)for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);if(!(o===9||32<=o&&o<=1114111))return this.throwError(`Expected valid JSON character: received "${o}"`)}else if(_e.test(r))return this.throwError("Stream contains non-printable characters");this.result+=r}}readBlockSequence(t){let i,n,r=!1,s,o=this.tag,l=this.anchor,a=[];for(this.anchor!==null&&typeof this.anchor<"u"&&this.anchorMap.set(this.anchor,a),s=this.peek();s!==0&&!(s!==45||(n=this.peek(1),!g(n)));){if(r=!0,this.position++,this.skipSeparationSpace(!0,-1)&&this.lineIndent<=t){a.push(null),s=this.peek();continue}if(i=this.line,this.composeNode(t,Mt,!1,!0),a.push(this.result),this.skipSeparationSpace(!0,-1),s=this.peek(),(this.line===i||this.lineIndent>t)&&s!==0)return this.throwError("Cannot read block sequence: bad indentation of a sequence entry");if(this.lineIndent<t)break}return r?(this.tag=o,this.anchor=l,this.kind="sequence",this.result=a,!0):!1}mergeMappings(t,i,n){if(!M(i))return this.throwError("Cannot merge mappings: the provided source object is unacceptable");for(let[r,s]of Object.entries(i))Object.hasOwn(t,r)||(Object.defineProperty(t,r,{value:s,writable:!0,enumerable:!0,configurable:!0}),n.add(r))}storeMappingPair(t,i,n,r,s,o,l){if(Array.isArray(r)){r=Array.prototype.slice.call(r);for(let a=0;a<r.length;a++){if(Array.isArray(r[a]))return this.throwError("Cannot store mapping pair: nested arrays are not supported inside keys");typeof r=="object"&&k(r[a])&&(r[a]="[object Object]")}}if(typeof r=="object"&&k(r)&&(r="[object Object]"),r=String(r),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(let a=0;a<s.length;a++)this.mergeMappings(t,s[a],i);else this.mergeMappings(t,s,i);else{if(!this.allowDuplicateKeys&&!i.has(r)&&Object.hasOwn(t,r))return this.line=o||this.line,this.position=l||this.position,this.throwError("Cannot store mapping pair: duplicated key");Object.defineProperty(t,r,{value:s,writable:!0,enumerable:!0,configurable:!0}),i.delete(r)}return t}readLineBreak(){let t=this.peek();if(t===10)this.position++;else if(t===13)this.position++,this.peek()===10&&this.position++;else return this.throwError("Cannot read line: line break not found");this.line+=1,this.lineStart=this.position}skipSeparationSpace(t,i){let n=0,r=this.peek();for(;r!==0;){for(;E(r);)r=this.next();if(t&&r===35)do r=this.next();while(r!==10&&r!==13&&r!==0);if(m(r))this.readLineBreak(),r=this.peek(),n++,this.lineIndent=0,this.readIndent(),r=this.peek();else break}return i!==-1&&n!==0&&this.lineIndent<i&&this.dispatchWarning("deficient indentation"),n}testDocumentSeparator(){let t=this.peek();return!!((t===45||t===46)&&t===this.peek(1)&&t===this.peek(2)&&(t=this.peek(3),t===0||g(t)))}writeFoldedLines(t){t===1?this.result+=" ":t>1&&(this.result+=`
`.repeat(t-1))}readPlainScalar(t,i){let n=this.kind,r=this.result,s=this.peek();if(g(s)||y(s)||s===35||s===38||s===42||s===33||s===124||s===62||s===39||s===34||s===37||s===64||s===96)return!1;let o;if((s===63||s===45)&&(o=this.peek(1),g(o)||i&&y(o)))return!1;this.kind="scalar",this.result="";let l=this.position,a=this.position,h=!1,u=0;for(;s!==0;){if(s===58){if(o=this.peek(1),g(o)||i&&y(o))break}else if(s===35){let c=this.peek(-1);if(g(c))break}else{if(this.position===this.lineStart&&this.testDocumentSeparator()||i&&y(s))break;if(m(s)){u=this.line;let c=this.lineStart,f=this.lineIndent;if(this.skipSeparationSpace(!1,-1),this.lineIndent>=t){h=!0,s=this.peek();continue}else{this.position=l,this.line=u,this.lineStart=c,this.lineIndent=f;break}}}h&&(this.captureSegment(a,l,!1),this.writeFoldedLines(this.line-u),a=l=this.position,h=!1),E(s)||(l=this.position+1),s=this.next()}return this.captureSegment(a,l,!1),this.result?!0:(this.kind=n,this.result=r,!1)}readSingleQuotedScalar(t){let i,n,r;if(i=this.peek(),i!==39)return!1;for(this.kind="scalar",this.result="",this.position++,n=r=this.position;(i=this.peek())!==0;)if(i===39)if(this.captureSegment(n,this.position,!0),i=this.next(),i===39)n=this.position,this.position++,r=this.position;else return!0;else if(m(i))this.captureSegment(n,r,!0),this.writeFoldedLines(this.skipSeparationSpace(!1,t)),n=r=this.position;else{if(this.position===this.lineStart&&this.testDocumentSeparator())return this.throwError("Unexpected end of the document within a single quoted scalar");this.position++,r=this.position}return this.throwError("Unexpected end of the stream within a single quoted scalar")}readDoubleQuotedScalar(t){let i=this.peek();if(i!==34)return!1;this.kind="scalar",this.result="",this.position++;let n=this.position,r=this.position,s;for(;(i=this.peek())!==0;){if(i===34)return this.captureSegment(r,this.position,!0),this.position++,!0;if(i===92){if(this.captureSegment(r,this.position,!0),i=this.next(),m(i))this.skipSeparationSpace(!1,t);else if(i<256&&Ft.has(i))this.result+=Ft.get(i),this.position++;else if((s=Ne.get(i)??0)>0){let o=s,l=0;for(;o>0;o--)if(i=this.next(),(s=Me(i))>=0)l=(l<<4)+s;else return this.throwError("Cannot read double quoted scalar: expected hexadecimal character");this.result+=Re(l),this.position++}else return this.throwError("Cannot read double quoted scalar: unknown escape sequence");r=n=this.position}else if(m(i))this.captureSegment(r,n,!0),this.writeFoldedLines(this.skipSeparationSpace(!1,t)),r=n=this.position;else{if(this.position===this.lineStart&&this.testDocumentSeparator())return this.throwError("Unexpected end of the document within a double quoted scalar");this.position++,n=this.position}}return this.throwError("Unexpected end of the stream within a double quoted scalar")}readFlowCollection(t){let i=this.peek(),n,r=!0,s={};if(i===91)n=93,r=!1,s=[];else if(i===123)n=125;else return!1;this.anchor!==null&&typeof this.anchor<"u"&&this.anchorMap.set(this.anchor,s),i=this.next();let o=this.tag,l=this.anchor,a=!0,h=null,u=null,c=null,f=!1,x=!1,p=0,S=0,d=new Set;for(;i!==0;){if(this.skipSeparationSpace(!0,t),i=this.peek(),i===n)return this.position++,this.tag=o,this.anchor=l,this.kind=r?"mapping":"sequence",this.result=s,!0;if(!a)return this.throwError("Cannot read flow collection: missing comma between flow collection entries");c=u=h=null,x=f=!1,i===63&&(p=this.peek(1),g(p)&&(x=f=!0,this.position++,this.skipSeparationSpace(!0,t))),S=this.line,this.composeNode(t,$,!1,!0),c=this.tag||null,u=this.result,this.skipSeparationSpace(!0,t),i=this.peek(),(f||this.line===S)&&i===58&&(x=!0,i=this.next(),this.skipSeparationSpace(!0,t),this.composeNode(t,$,!1,!0),h=this.result),r?this.storeMappingPair(s,d,c,u,h):x?s.push(this.storeMappingPair({},d,c,u,h)):s.push(u),this.skipSeparationSpace(!0,t),i=this.peek(),i===44?(a=!0,i=this.next()):a=!1}return this.throwError("Cannot read flow collection: unexpected end of the stream within a flow collection")}readBlockScalar(t){let i=X,n=!1,r=!1,s=t,o=0,l=!1,a=this.peek(),h=!1;if(a===124)h=!1;else if(a===62)h=!0;else return!1;this.kind="scalar",this.result="";let u=0;for(;a!==0;)if(a=this.next(),a===43||a===45)if(X===i)i=a===43?Ot:Ce;else return this.throwError("Cannot read block: chomping mode identifier repeated");else if((u=Oe(a))>=0){if(u===0)return this.throwError("Cannot read block: indentation width must be greater than 0");if(!r)s=t+u-1,r=!0;else return this.throwError("Cannot read block: indentation width identifier repeated")}else break;if(E(a)){do a=this.next();while(E(a));if(a===35)do a=this.next();while(!m(a)&&a!==0)}for(;a!==0;){for(this.readLineBreak(),this.lineIndent=0,a=this.peek();(!r||this.lineIndent<s)&&a===32;)this.lineIndent++,a=this.next();if(!r&&this.lineIndent>s&&(s=this.lineIndent),m(a)){o++;continue}if(this.lineIndent<s){i===Ot?this.result+=`
`.repeat(n?1+o:o):i===X&&n&&(this.result+=`
`);break}h?E(a)?(l=!0,this.result+=`
`.repeat(n?1+o:o)):l?(l=!1,this.result+=`
`.repeat(o+1)):o===0?n&&(this.result+=" "):this.result+=`
`.repeat(o):this.result+=`
`.repeat(n?1+o:o),n=!0,r=!0,o=0;let c=this.position;for(;!m(a)&&a!==0;)a=this.next();this.captureSegment(c,this.position,!1)}return!0}readBlockMapping(t,i){let n=this.tag,r=this.anchor,s={},o=new Set,l,a=!1,h,u,c=null,f=null,x=null,p=!1,S=!1,d;for(this.anchor!==null&&typeof this.anchor<"u"&&this.anchorMap.set(this.anchor,s),d=this.peek();d!==0;){if(l=this.peek(1),h=this.line,u=this.position,(d===63||d===58)&&g(l)){if(d===63)p&&(this.storeMappingPair(s,o,c,f,null),c=f=x=null),S=!0,p=!0,a=!0;else if(p)p=!1,a=!0;else return this.throwError("Cannot read block as explicit mapping pair is incomplete: a key node is missed or followed by a non-tabulated empty line");this.position+=1,d=l}else if(this.composeNode(i,Nt,!1,!0))if(this.line===h){for(d=this.peek();E(d);)d=this.next();if(d===58){if(d=this.next(),!g(d))return this.throwError("Cannot read block: a whitespace character is expected after the key-value separator within a block mapping");p&&(this.storeMappingPair(s,o,c,f,null),c=f=x=null),S=!0,p=!1,a=!1,c=this.tag,f=this.result}else return S?this.throwError("Cannot read an implicit mapping pair: missing colon"):(this.tag=n,this.anchor=r,!0)}else return S?this.throwError("Cannot read a block mapping entry: a multiline key may not be an implicit key"):(this.tag=n,this.anchor=r,!0);else break;if((this.line===h||this.lineIndent>t)&&(this.composeNode(t,v,!0,a)&&(p?f=this.result:x=this.result),p||(this.storeMappingPair(s,o,c,f,x,h,u),c=f=x=null),this.skipSeparationSpace(!0,-1),d=this.peek()),this.lineIndent>t&&d!==0)return this.throwError("Cannot read block: bad indentation of a mapping entry");if(this.lineIndent<t)break}return p&&this.storeMappingPair(s,o,c,f,null),S&&(this.tag=n,this.anchor=r,this.kind="mapping",this.result=s),S}readTagProperty(){let t,i=!1,n=!1,r="",s,o;if(o=this.peek(),o!==33)return!1;if(this.tag!==null)return this.throwError("Cannot read tag property: duplication of a tag property");if(o=this.next(),o===60?(i=!0,o=this.next()):o===33?(n=!0,r="!!",o=this.next()):r="!",t=this.position,i){do o=this.next();while(o!==0&&o!==62);if(this.position<this.length)s=this.input.slice(t,this.position),o=this.next();else return this.throwError("Cannot read tag property: unexpected end of stream")}else{for(;o!==0&&!g(o);){if(o===33){if(n)return this.throwError("Cannot read tag property: tag suffix cannot contain an exclamation mark");if(r=this.input.slice(t-1,this.position+1),!Rt.test(r))return this.throwError("Cannot read tag property: named tag handle contains invalid characters");n=!0,t=this.position+1}o=this.next()}if(s=this.input.slice(t,this.position),Ie.test(s))return this.throwError("Cannot read tag property: tag suffix cannot contain flow indicator characters")}if(s&&!bt.test(s))return this.throwError(`Cannot read tag property: invalid characters in tag name "${s}"`);if(i)this.tag=s;else if(this.tagMap.has(r))this.tag=this.tagMap.get(r)+s;else if(r==="!")this.tag=`!${s}`;else if(r==="!!")this.tag=`tag:yaml.org,2002:${s}`;else return this.throwError(`Cannot read tag property: undeclared tag handle "${r}"`);return!0}readAnchorProperty(){let t=this.peek();if(t!==38)return!1;if(this.anchor!==null)return this.throwError("Cannot read anchor property: duplicate anchor property");t=this.next();let i=this.position;for(;t!==0&&!g(t)&&!y(t);)t=this.next();return this.position===i?this.throwError("Cannot read anchor property: name of an anchor node must contain at least one character"):(this.anchor=this.input.slice(i,this.position),!0)}readAlias(){if(this.peek()!==42)return!1;let t=this.next(),i=this.position;for(;t!==0&&!g(t)&&!y(t);)t=this.next();if(this.position===i)return this.throwError("Cannot read alias: alias name must contain at least one character");let n=this.input.slice(i,this.position);return this.anchorMap.has(n)?(this.result=this.anchorMap.get(n),this.skipSeparationSpace(!0,-1),!0):this.throwError(`Cannot read alias: unidentified alias "${n}"`)}composeNode(t,i,n,r){let s,o,l=1,a=!1,h=!1,u,c,f;this.tag=null,this.anchor=null,this.kind=null,this.result=null;let x=s=o=v===i||Mt===i;if(n&&this.skipSeparationSpace(!0,-1)&&(a=!0,this.lineIndent>t?l=1:this.lineIndent===t?l=0:this.lineIndent<t&&(l=-1)),l===1)for(;this.readTagProperty()||this.readAnchorProperty();)this.skipSeparationSpace(!0,-1)?(a=!0,o=x,this.lineIndent>t?l=1:this.lineIndent===t?l=0:this.lineIndent<t&&(l=-1)):o=!1;if(o&&(o=a||r),l===1||v===i)if(c=$===i||Nt===i?t:t+1,f=this.position-this.lineStart,l===1)if(o&&(this.readBlockSequence(f)||this.readBlockMapping(f,c))||this.readFlowCollection(c))h=!0;else{if(s&&this.readBlockScalar(c)||this.readSingleQuotedScalar(c)||this.readDoubleQuotedScalar(c))h=!0;else if(this.readAlias()){if(h=!0,this.tag!==null||this.anchor!==null)return this.throwError("Cannot compose node: alias node should not have any properties")}else this.readPlainScalar(c,$===i)&&(h=!0,this.tag===null&&(this.tag="?"));this.anchor!==null&&this.anchorMap.set(this.anchor,this.result)}else l===0&&(h=o&&this.readBlockSequence(f));if(this.tag!==null&&this.tag!=="!")if(this.tag==="?"){for(let p=0;p<this.implicitTypes.length;p++)if(u=this.implicitTypes[p],u.resolve(this.result)){this.result=u.construct(this.result),this.tag=u.tag,this.anchor!==null&&this.anchorMap.set(this.anchor,this.result);break}}else if(this.typeMap[this.kind??"fallback"].has(this.tag)){if(u=this.typeMap[this.kind??"fallback"].get(this.tag),this.result!==null&&u.kind!==this.kind)return this.throwError(`Unacceptable node kind for !<${this.tag}> tag: it should be "${u.kind}", not "${this.kind}"`);if(u.resolve(this.result))this.result=u.construct(this.result),this.anchor!==null&&this.anchorMap.set(this.anchor,this.result);else return this.throwError(`Cannot resolve a node with !<${this.tag}> explicit tag`)}else return this.throwError(`Cannot resolve unknown tag !<${this.tag}>`);return this.tag!==null||this.anchor!==null||h}readDocument(){let t=this.position,i,n,r,s=!1,o;for(this.version=null,this.checkLineBreaks=!1,this.tagMap=new Map,this.anchorMap=new Map;(o=this.peek())!==0&&(this.skipSeparationSpace(!0,-1),o=this.peek(),!(this.lineIndent>0||o!==37));){for(s=!0,o=this.next(),i=this.position;o!==0&&!g(o);)o=this.next();if(n=this.input.slice(i,this.position),r=[],n.length<1)return this.throwError("Cannot read document: directive name length must be greater than zero");for(;o!==0;){for(;E(o);)o=this.next();if(o===35){do o=this.next();while(o!==0&&!m(o));break}if(m(o))break;for(i=this.position;o!==0&&!g(o);)o=this.next();r.push(this.input.slice(i,this.position))}switch(o!==0&&this.readLineBreak(),n){case"YAML":this.yamlDirectiveHandler(...r);break;case"TAG":this.tagDirectiveHandler(...r);break;default:this.dispatchWarning(`unknown document directive "${n}"`);break}}if(this.skipSeparationSpace(!0,-1),this.lineIndent===0&&this.peek()===45&&this.peek(1)===45&&this.peek(2)===45)this.position+=3,this.skipSeparationSpace(!0,-1);else if(s)return this.throwError("Cannot read document: directives end mark is expected");if(this.composeNode(this.lineIndent-1,v,!1,!0),this.skipSeparationSpace(!0,-1),this.checkLineBreaks&&Le.test(this.input.slice(t,this.position))&&this.dispatchWarning("non-ASCII line breaks are interpreted as content"),this.position===this.lineStart&&this.testDocumentSeparator())this.peek()===46&&(this.position+=3,this.skipSeparationSpace(!0,-1));else if(this.position<this.length-1)return this.throwError("Cannot read document: end of the stream or a document separator is expected");return this.result}*readDocuments(){for(;this.position<this.length-1;)yield this.readDocument()}};function $t(e){return e=String(e),e.length>0&&(m(e.charCodeAt(e.length-1))||(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1))),e+="\0",e}function bi(e,t={}){e=$t(e);let n=new D(e,{...t,schema:F.get(t.schema)}).readDocuments(),r=n.next().value;if(!n.next().done)throw new SyntaxError("Found more than 1 document in the stream: expected a single document");return r??null}function Fi(e,t={}){return e=$t(e),[...new D(e,{...t,schema:F.get(t.schema)}).readDocuments()]}var Qt=1,Wt=2,Xt=3,Vt=4,G=5,Pe=/^\n* /,Be=new Map([[0,"\\0"],[7,"\\a"],[8,"\\b"],[9,"\\t"],[10,"\\n"],[11,"\\v"],[12,"\\f"],[13,"\\r"],[27,"\\e"],[34,'\\"'],[92,"\\\\"],[133,"\\N"],[160,"\\_"],[8232,"\\L"],[8233,"\\P"]]),De=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function vt(e){let t=e.toString(16).toUpperCase();if(e<=255)return`\\x${t.padStart(2,"0")}`;if(e<=65535)return`\\u${t.padStart(4,"0")}`;if(e<=4294967295)return`\\U${t.padStart(8,"0")}`;throw new Error("Code point within a string may not be greater than 0xFFFFFFFF")}function $e(e){let t=new Map;for(let i of Object.keys(e)){let n=String(e[i]);i.slice(0,2)==="!!"&&(i=`tag:yaml.org,2002:${i.slice(2)}`),t.set(i,n)}return t}function Ut(e,t){let i=" ".repeat(t);return e.split(`
`).map(n=>n.length?i+n:n).join(`
`)}function Yt(e,t){return`
${" ".repeat(e*t)}`}function q(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==65279||65536<=e&&e<=1114111}function it(e){return q(e)&&e!==65279&&e!==44&&e!==91&&e!==93&&e!==123&&e!==125&&e!==58&&e!==35}function ve(e){return it(e)&&!E(e)&&e!==45&&e!==63&&e!==38&&e!==42&&e!==33&&e!==124&&e!==62&&e!==39&&e!==34&&e!==37&&e!==64&&e!==96}function jt(e){return Pe.test(e)}function Ue(e,t,i,n,r){let s=n!==-1,o=!1,l=!1,a=-1,h=ve(e.charCodeAt(0))&&!E(e.charCodeAt(e.length-1)),u,c;if(t)for(c=0;c<e.length;c++){if(u=e.charCodeAt(c),!q(u))return G;h=h&&it(u)}else{for(c=0;c<e.length;c++){if(u=e.charCodeAt(c),u===10)o=!0,s&&(l=l||c-a-1>n&&e[a+1]!==" ",a=c);else if(!q(u))return G;h=h&&it(u)}l=l||s&&c-a-1>n&&e[a+1]!==" "}return!o&&!l?h&&!r.some(f=>f.resolve(e))?Qt:Wt:i>9&&jt(e)?G:l?Vt:Xt}function Ht(e,t){if(e===""||e[0]===" ")return e;let i=/ [^ ]/g,n=0,r,s=0,o=0,l=[];for(let a of e.matchAll(i))o=a.index,o-n>t&&(r=s>n?s:o,l.push(e.slice(n,r)),n=r+1),s=o;return e.length-n>t&&s>n?(l.push(e.slice(n,s)),l.push(e.slice(s+1))):l.push(e.slice(n)),l.join(`
`)}function Kt(e){return e.at(-1)===`
`?e.slice(0,-1):e}function Ye(e,t){let i=/(\n+)([^\n]*)/g,n=(()=>{let l=e.indexOf(`
`);return l=l!==-1?l:e.length,i.lastIndex=l,Ht(e.slice(0,l),t)})(),r=e[0]===`
`||e[0]===" ",s,o;for(;o=i.exec(e);){let l=o[1],a=o[2]||"";s=a[0]===" ",n+=l+(!r&&!s&&a!==""?`
`:"")+Ht(a,t),r=s}return n}function He(e){let t="",i,n,r;for(let s=0;s<e.length;s++){if(i=e.charCodeAt(s),i>=55296&&i<=56319&&(n=e.charCodeAt(s+1),n>=56320&&n<=57343)){t+=vt((i-55296)*1024+n-56320+65536),s++;continue}r=Be.get(i),t+=!r&&q(i)?e[s]:r||vt(i)}return t}function Gt(e,t){let i=jt(e)?String(t):"",n=e[e.length-1]===`
`,s=n&&(e[e.length-2]===`
`||e===`
`)?"+":n?"":"-";return`${i}${s}
`}function zt(e,t,i){if(!M(e))return;if(t.has(e)){i.add(e);return}t.add(e);let n=Array.isArray(e)?e:Object.values(e);for(let r of n)zt(r,t,i)}var Q=class{indent;arrayIndent;skipInvalid;flowLevel;sortKeys;lineWidth;useAnchors;compatMode;condenseFlow;implicitTypes;explicitTypes;duplicates=[];usedDuplicates=new Set;styleMap=new Map;constructor({schema:t=C,indent:i=2,arrayIndent:n=!0,skipInvalid:r=!1,flowLevel:s=-1,styles:o=void 0,sortKeys:l=!1,lineWidth:a=80,useAnchors:h=!0,compatMode:u=!0,condenseFlow:c=!1}){this.indent=Math.max(1,i),this.arrayIndent=n,this.skipInvalid=r,this.flowLevel=s,o&&(this.styleMap=$e(o)),this.sortKeys=l,this.lineWidth=a,this.useAnchors=h,this.compatMode=u,this.condenseFlow=c,this.implicitTypes=t.implicitTypes,this.explicitTypes=t.explicitTypes}stringifyScalar(t,{level:i,isKey:n}){if(t.length===0)return"''";if(this.compatMode&&De.includes(t))return`'${t}'`;let r=this.indent*Math.max(1,i),s=this.lineWidth===-1?-1:Math.max(Math.min(this.lineWidth,40),this.lineWidth-r),o=n||this.flowLevel>-1&&i>=this.flowLevel;switch(Ue(t,o,this.indent,s,this.implicitTypes)){case Qt:return t;case Wt:return`'${t.replace(/'/g,"''")}'`;case Xt:return`|${Gt(t,this.indent)}${Kt(Ut(t,r))}`;case Vt:return`>${Gt(t,this.indent)}${Kt(Ut(Ye(t,s),r))}`;case G:return`"${He(t)}"`;default:throw new TypeError("Invalid scalar style should be unreachable: please file a bug report against Deno at https://github.com/denoland/std/issues")}}stringifyFlowSequence(t,{level:i}){let n=[];for(let s of t){let o=this.stringifyNode(s,{level:i,block:!1,compact:!1,isKey:!1});o!==null&&n.push(o)}let r=this.condenseFlow?",":", ";return`[${n.join(r)}]`}stringifyBlockSequence(t,{level:i,compact:n}){let r=Yt(this.indent,i),s=n?"":r,o=[];for(let l of t){let a=this.stringifyNode(l,{level:i+1,block:!0,compact:!0,isKey:!1});if(a===null)continue;let h=10===a.charCodeAt(0)?"-":"- ";o.push(`${h}${a}`)}return o.length?s+o.join(r):"[]"}stringifyFlowMapping(t,{level:i}){let n=this.condenseFlow?'"':"",r=this.condenseFlow?":":": ",s=[];for(let[o,l]of Object.entries(t)){let a=this.stringifyNode(o,{level:i,block:!1,compact:!1,isKey:!1});if(a===null)continue;let h=this.stringifyNode(l,{level:i,block:!1,compact:!1,isKey:!1});if(h===null)continue;let u=a.length>1024?"? ":"";s.push(n+u+a+n+r+h)}return`{${s.join(", ")}}`}stringifyBlockMapping(t,{tag:i,level:n,compact:r}){let s=Object.keys(t);if(this.sortKeys===!0)s.sort();else if(typeof this.sortKeys=="function")s.sort(this.sortKeys);else if(this.sortKeys)throw new TypeError(`"sortKeys" must be a boolean or a function: received ${typeof this.sortKeys}`);let o=Yt(this.indent,n),l=[];for(let h of s){let u=t[h],c=this.stringifyNode(h,{level:n+1,block:!0,compact:!0,isKey:!0});if(c===null)continue;let f=i!==null&&i!=="?"||c.length>1024,x=this.stringifyNode(u,{level:n+1,block:!0,compact:f,isKey:!1});if(x===null)continue;let p="";f&&(p+=c.charCodeAt(0)===10?"?":"? "),p+=c,f&&(p+=o),p+=x.charCodeAt(0)===10?":":": ",p+=x,l.push(p)}let a=r?"":o;return l.length?a+l.join(o):"{}"}getTypeRepresentation(t,i){if(!t.represent)return i;let n=this.styleMap.get(t.tag)??t.defaultStyle;if(typeof t.represent=="function")return t.represent(i,n);let r=t.represent[n];if(!r)throw new TypeError(`!<${t.tag}> tag resolver accepts not "${n}" style`);return r(i,n)}detectType(t){for(let i of this.implicitTypes)if(i.predicate?.(t))return t=this.getTypeRepresentation(i,t),{tag:"?",value:t};for(let i of this.explicitTypes)if(i.predicate?.(t))return t=this.getTypeRepresentation(i,t),{tag:i.tag,value:t};return{tag:null,value:t}}stringifyNode(t,{level:i,block:n,compact:r,isKey:s}){let o=this.detectType(t),l=o.tag;if(t=o.value,n&&(n=this.flowLevel<0||this.flowLevel>i),typeof t=="string"||t instanceof String)t=t instanceof String?t.valueOf():t,l!=="?"&&(t=this.stringifyScalar(t,{level:i,isKey:s}));else if(M(t)){let a=this.duplicates.indexOf(t),h=a!==-1;if(h){if(this.usedDuplicates.has(t))return`*ref_${a}`;this.usedDuplicates.add(t)}if((l!==null&&l!=="?"||h||this.indent!==2&&i>0)&&(r=!1),Array.isArray(t)){let u=!this.arrayIndent&&i>0?i-1:i;n&&t.length!==0?(t=this.stringifyBlockSequence(t,{level:u,compact:r}),h&&(t=`&ref_${a}${t}`)):(t=this.stringifyFlowSequence(t,{level:u}),h&&(t=`&ref_${a} ${t}`))}else n&&Object.keys(t).length!==0?(t=this.stringifyBlockMapping(t,{tag:l,level:i,compact:r}),h&&(t=`&ref_${a}${t}`)):(t=this.stringifyFlowMapping(t,{level:i}),h&&(t=`&ref_${a} ${t}`))}else{if(this.skipInvalid)return null;throw new TypeError(`Cannot stringify ${typeof t}`)}return l!==null&&l!=="?"&&(t=`!<${l}> ${t}`),t}stringify(t){if(this.useAnchors){let n=new Set,r=new Set;zt(t,n,r),this.duplicates=[...r],this.usedDuplicates=new Set}let i=this.stringifyNode(t,{level:0,block:!0,compact:!0,isKey:!1});return i!==null?`${i}
`:""}};function Hi(e,t={}){return new Q({...t,schema:F.get(t.schema)}).stringify(e)}export{bi as parse,Fi as parseAll,Hi as stringify};
//# sourceMappingURL=mod.bundle.js.map